<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Realtime Notifications</title>
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
	<script src="https://code.jquery.com/jquery-2.1.3.min.js" type="text/javascript"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
	<script src="http://js.pusher.com/2.2/pusher.min.js" type="text/javascript"></script>
</head>
<body>

	<style type="text/css" media="screen">
		
		@import url(http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400);


		div.phone {
			background: url(images/i-phone-5-vector.png);
			background-size: cover;
			background-repeat: no-repeat;
			width: 612px;
			height: 990px;
		}

		input.create-notification {
		  outline: none;
		  border: none;
		  width: 100%;
		  font-size: 60px;
		  text-align: center;
		  font-family: 'Source Sans Pro', sans-serif;
		  font-weight: 200;

		}

		.inputs {
			margin-top: 300px;
			text-align: center;
		}

		button.submit-notification {
			margin-top: 80px;
			width: 100px;
			height: 65px;
			outline: none;
			font-family: 'Source Sans Pro', sans-serif;
		  	font-weight: 200;
		  	font-size: 18px;
		  	background: none;
		  	background-color: rgba(135,206,250, 0.2);
		  	border: 1px solid rgba(0,0,0,0.05);
		  	border-radius: 6px;
		  	color: rgba(0,0,0,0.6);
		}

		button.submit-notification:hover {
			background-color: skyblue;
			opacity: 0.8;
			color: white;
			cursor: pointer;
			border: none;
		}

	</style>

	<div class="inputs">
		<input class="create-notification" placeholder="Send a notification :)"></input>
		<button class="submit-notification">Go!</button>

	</div>


	<div class="notification">
	</div>
	

	<script>

	var pusher = new Pusher('5fc7c2b982b526113bff');

	var notificationsChannel = pusher.subscribe('notifications');

	notificationsChannel.bind('new_notification', function(notification){
		var message = notification.message;
		toastr.success(message)
	});

	var sendNotification = function(){
		var text = $('input.create-notification').val();
		$.post('/notification', {message: text}).success(function(){
			console.log('Notification sent!');
		});
	};

	$('button.submit-notification').on('click', sendNotification);

	</script>

</body>
</html>